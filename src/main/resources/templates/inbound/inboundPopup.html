<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>입고 등록</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/vendors/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="assets/vendors/bootstrap-icons/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/app.css">
    
    <!-- TOAST UI CDN -->
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />

    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <style>
        .display-flex {
            display: flex;
        }
        .child-input1 {
            flex: 1;
            width: 30%;
            box-sizing: border-box;
        }
        .child-input2 {
            flex: 1;
            margin: 0px 5%;
            width: 30%;
            box-sizing: border-box;
        }
        .child-input3 {
		    flex: 0.45;  
		    width: 15%; 
		    box-sizing: border-box;
		}
        .tui-grid-cell {
            background-color: #ffffff !important;
        }
    </style>
</head>

<body>
    <div class="card">
        <div class="card-body">
            <div class="modal-header">
                <h4 class="modal-title">입고 등록</h4>
            </div>
            <div class="modal-body">
                <form id="inboundForm">
                    <div class="display-flex">
                        <div class="child-input1">
                            <label>입고번호</label>
                            <div class="form-group">
                                <input type="text" id="inNo" class="form-control" readonly>
                            </div>
                        </div>
                        <div class="child-input2">
                            <label>입고일자</label>
                            <div class="form-group">
                                <div class="tui-datepicker-input tui-datetime-input tui-has-focus">
                                    <input type="text" id="inDate" class="form-control" aria-label="Date"/>
                                    <span class="tui-ico-date"></span>
                                </div>
                                <div id="inDatePicker" style="margin-top: -1px;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="display-flex">
                        <div class="child-input1">
                            <label>품목명</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" id="itemName" class="form-control" readonly>
                                    <input type="hidden" id="itemCode">
                                    <button type="button" class="btn btn-outline-secondary" id="itemSearchBtn">검색</button>
                                </div>
                            </div>
                        </div>
                        <div class="child-input2">
                            <label>입고수량</label>
                            <div class="form-group">
                                <input type="number" id="inQty" class="form-control" min="1">
                            </div>
                        </div>
                    </div>

                    <div class="display-flex">
                        <div class="child-input1">
                            <label>창고</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" id="warehouseName" class="form-control" readonly>
                                    <input type="hidden" id="warehouseCode">
                                    <button type="button" class="btn btn-outline-secondary" id="warehouseSearchBtn">검색</button>
                                </div>
                            </div>
                        </div>
                        <div class="child-input2">
                            <label>구역</label>
                            <div class="form-group">
                                <select class="form-select" id="zone" disabled>
                                    <option value="">구역 선택</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="display-flex">
                        <div class="child-input1">
                            <label>검수자</label>
                            <div class="form-group">
                                <input type="text" id="inspector" class="form-control">
                            </div>
                        </div>
                        <div class="child-input2">
                            <label>검수결과</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-text">정상</span>
                                    <input type="number" id="normalQty" class="form-control" min="0">
                                    <span class="input-group-text">불량</span>
                                    <input type="number" id="defectQty" class="form-control" min="0">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="display-flex">
                        <div class="child-input3">
                            <label>상태</label>
                            <div class="form-group">
                                <input type="text" id="status" class="form-control" value="대기" readonly>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-secondary" onclick="window.close()">닫기</button>
                <button type="button" class="btn btn-primary" onclick="saveInbound()">저장</button>
            </div>
        </div>
    </div>

    <!-- 품목 검색 모달 -->
    <div class="modal fade" id="itemSearchModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">품목 검색</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="itemSearchInput" placeholder="품목명 검색">
                    </div>
                    <div id="itemSearchGrid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 창고 검색 모달 -->
    <div class="modal fade" id="warehouseSearchModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">창고 검색</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="warehouseSearchInput" placeholder="창고명 검색">
                    </div>
                    <div id="warehouseSearchGrid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 스크립트 -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/js/main.js"></script>
    
    <!-- TOAST UI CDN -->
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
    <script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>
    <script src="https://uicdn.toast.com/tui.date-picker/latest/i18n/ko.js"></script>
    
    <!-- jQuery -->
    <script src="assets/js/jquery-3.7.1.js"></script>
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script src="/js/inbound/inboundPopup.js"></script>
</body>
</html>